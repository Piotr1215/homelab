---
apiVersion: v1
kind: ConfigMap
metadata:
  name: coredns-homelab
  namespace: kube-system
data:
  Corefile: |
    # Homelab DNS - handles *.homelab.local
    homelab.local:53 {
        log
        errors
        # Wildcard: all *.homelab.local â†’ Gateway IP
        template IN A {
            answer "{{ .Name }} 60 IN A 192.168.178.92"
        }
        template IN AAAA {
            rcode NOERROR
        }
    }

    # Forward everything else to Fritzbox
    .:53 {
        log
        errors
        forward . 192.168.178.1
        cache 30
    }
