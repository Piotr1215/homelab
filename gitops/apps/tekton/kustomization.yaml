apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Tekton Pipelines (latest)
  - https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml
  # Tekton Triggers
  - https://storage.googleapis.com/tekton-releases/triggers/latest/release.yaml
  - https://storage.googleapis.com/tekton-releases/triggers/latest/interceptors.yaml
  # Tekton Dashboard (read-only mode)
  - https://infra.tekton.dev/tekton-releases/dashboard/latest/release.yaml

patches:
  - target:
      kind: Service
      name: tekton-dashboard
      namespace: tekton-pipelines
    patch: |-
      - op: add
        path: /metadata/annotations
        value:
          httproute.controller/expose: "true"
          httproute.controller/hostname: "tekton.homelab.local"
